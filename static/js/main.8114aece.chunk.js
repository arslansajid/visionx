(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{115:function(e,t,a){e.exports=a(200)},120:function(e,t,a){},122:function(e,t,a){},151:function(e,t){},153:function(e,t){},165:function(e,t,a){e.exports=a.p+"static/media/library.9eeccb7a.jpg"},200:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(28),s=a.n(r),c=(a(120),a(121),a(122),a(44)),l=a(78),i=a.n(l),u=a(102),m=a(35),p=a(36),h=a(43),d=a(37),v=a(65),b=a(42),E=a(41),g=a(39),f=a(112),_=a(9),k="SET_SEARCH_INPUT",w="RESULTS_FETCHED",y="INFINITE_SCROLL_RESULTS_FETCHED",x="REVIEWS_FETCHED",O=a(47),j=a.n(O),N=a(48),R=a.n(N),I="DEZZre4OeBQSqC0L3wQQ";function S(e){return function(t){return j.a.get("https://www.goodreads.com/search/index.xml?key=".concat(I,"&q=").concat(e)).then(function(e){var a=R.a.xml2js(e.data,{compact:!0});console.log("action result",a);var n=Object.keys(a.GoodreadsResponse.search.results).length?a.GoodreadsResponse.search.results.work.slice(0,5):[],o=a.GoodreadsResponse.search["total-results"]._text;t({type:w,payload:{searchResult:n,totalResponse:o}})}).catch(function(){console.log("Error fetching reviews...")})}}var C={menuHeaderStyle:{padding:"15px",background:"#1a8e85",color:"white",display:"flex",justifyContent:"center",alignItems:"center"},homeScreen:{paddingLeft:"0",backgroundColor:"#000",display:"flex",flexDirection:"column",justifyContent:"center",alignItems:"center"}},D=function(e){return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",{className:"select-option",style:{borderBottom:"1px solid",padding:"15px"}},o.a.createElement(g.a,{to:{pathname:"/detail/".concat(e.value.id),data:e.data}},o.a.createElement("div",null,e.label),o.a.createElement("div",null,e.value.author))))},P=function(e){return e.selectProps.options.length>=5?o.a.createElement(_.z.MenuList,e,e.children,o.a.createElement(g.a,{to:{pathname:"/full-results/".concat(e.options[0].value.searchInput),searchInput:e.options[0].value.searchInput}},o.a.createElement("div",{style:C.menuHeaderStyle},"Show ",e.options[0].value.totalOptions-5," more results"))):o.a.createElement(_.z.MenuList,e,e.children)},T=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleSelect=function(e){a.setState({selectedBook:e})},a.state={inputValue:"",selectedBook:"",searchOptions:[],totalResults:0},a.handleInputChange=a.handleInputChange.bind(Object(v.a)(a)),a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"handleInputChange",value:function(){var e=Object(u.a)(i.a.mark(function e(t){var a,n,o=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a="",n=t.replace(/\W/g,""),this.setState({inputValue:n}),e.next=5,this.props.dispatch(S(t)).then(function(e){return o.setState({searchOptions:o.props.results,totalResults:o.props.totalResponse}),o.props.results});case 5:return(a=this.props.results)&&a.length&&a.map(function(e,a){return e.label=e.best_book.title._text,e.value={name:e.best_book.title._text,author:e.best_book.author.name._text,id:e.best_book.id._text,totalOptions:o.props.totalResponse,searchInput:t},e}),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"main"},o.a.createElement("div",{className:"home-screen space-2",style:C.homeScreen},o.a.createElement("div",{className:"homeCoverStyle",style:{background:"url(".concat(a(165),")")}}),o.a.createElement("div",{className:"coverTextWrapper"},o.a.createElement("div",null,o.a.createElement(g.a,{to:{pathname:"/full-results/".concat(this.state.inputValue)}},o.a.createElement("div",{className:"searchButtonBar"},o.a.createElement("h1",{className:"searchButtonText"},"Search"))),o.a.createElement(f.a,{className:"selectControl",cacheOptions:!0,loadOptions:this.handleInputChange,onChange:function(t){return e.handleSelect(t)},placeholder:"Search by keyword...",components:{MenuList:P,Option:D}})))))}}]),t}(n.Component);var B=Object(E.b)(function(e){return{searchInput:e.searchInput.searchedInput,results:e.searchInput.results.searchResult,totalResponse:e.searchInput.results.totalResponse}})(T),M=a(216),H=a(217),L=a(218),G=a(226),W=a(227),q=Object(M.a)(function(e){return{root:{justifyContent:"center",flexWrap:"wrap"},paper:{padding:e.spacing(1,2)}}});function A(e){var t=q();return o.a.createElement("div",{className:t.root},o.a.createElement(H.a,{elevation:0,className:t.paper},o.a.createElement(G.a,{"aria-label":"Breadcrumb"},o.a.createElement(W.a,{color:"inherit",href:"/"},"Home"),o.a.createElement(L.a,{style:{textTransform:"capitalize"},color:"textPrimary"},e.routeName.split("/")[1]))))}var F=a(67),V=a.n(F),U=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).fetchBookDataAndReviews=function(){var e,t,n,o=a.props.location;a.props.dispatch((e=o.data.best_book.id._text,function(t,a){return j.a.get("https://www.goodreads.com/book/show.xml?key=".concat(I,"&id=").concat(e)).then(function(e){var a=R.a.xml2js(e.data,{compact:!0}).GoodreadsResponse.book;t({type:w,payload:a})}).catch(function(){console.log("Error fetching results...")})})).then(function(e){a.setState({bookData:a.props.results})}),a.props.dispatch((t=o.data.best_book.author.name._text,n=o.data.best_book.title._text,function(e,a){return j.a.get("https://www.goodreads.com/book/title.xml?author=".concat(t,"&key=").concat(I,"&title=").concat(n)).then(function(t){var a=R.a.xml2js(t.data,{compact:!0}).GoodreadsResponse;e({type:x,payload:a})}).catch(function(){console.log("Error fetching reviews...")})})).then(function(e){a.setState({totalReviews:a.props.reviews})})},a.state={bookData:{},totalReviews:[]},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){this.props.location.data&&this.fetchBookDataAndReviews()}},{key:"render",value:function(){var e=this.state.bookData;return console.log("Props",this.props.location.data),console.log("bookData",this.state.bookData),console.log("totalReviews",this.state.totalReviews),this.props.location.data?o.a.createElement("div",{className:"container my-3"},o.a.createElement("div",{className:""},o.a.createElement(A,{routeName:this.props.location.pathname})),Object.keys(e).length?o.a.createElement("div",{className:"book-data"},o.a.createElement("div",{className:"row"},o.a.createElement("div",{className:"col-12 col-md-4 col-lg-4 mb-2"},o.a.createElement("img",{style:{maxHeight:"250px"},src:e.image_url._text,alt:"img-cover",height:"250px",width:"90%"})),o.a.createElement("div",{className:"col-12 col-md-8 col-lg-8"},o.a.createElement("h3",null,e.title._text?e.title._text:e.title._cdata),o.a.createElement("h5",null,e.authors.author.length?e.authors.author[0].name._text:e.authors.author.name._text),o.a.createElement("p",null,"Rating: ",e.average_rating._text),o.a.createElement(V.a,{name:"rating",editing:!1,starCount:5,value:parseFloat(e.average_rating._text)}),o.a.createElement("h5",null,"Publisher: ",o.a.createElement("span",{className:"book-data"},e.publisher._text?e.publisher._text:"Data currently not available...")),o.a.createElement("h5",null,"Num of pages: ",o.a.createElement("span",{className:"book-data"},e.num_pages._cdata?e.num_pages._cdata:"Data currently not available...")),o.a.createElement("h5",null,"Published on: ",o.a.createElement("span",{className:"book-data"},e.publication_day._text?"".concat(e.publication_day._text,"-").concat(e.publication_month._text,"-").concat(e.publication_year._text):"Data currently not available...")))),o.a.createElement("hr",null),o.a.createElement("div",{className:"row my-3"},o.a.createElement("div",{className:"col"},o.a.createElement("h3",null,"Reviews"),o.a.createElement("h5",null,"Ratings Count: ",o.a.createElement("span",{className:"book-data"},e.work.ratings_count?e.work.ratings_count._text:"Data currently not available...")),o.a.createElement("h5",null,"Ratings Sum: ",o.a.createElement("span",{className:"book-data"},e.work.ratings_sum?e.work.ratings_sum._text:"Data currently not available...")),o.a.createElement("h5",null,"Reviews Count: ",o.a.createElement("span",{className:"book-data"},e.work.reviews_count?e.work.reviews_count._text:"Data currently not available..."))))):null):(window.location.replace("/"),null)}}]),t}(n.Component);var z=Object(E.b)(function(e){return{searchInput:e.searchInput.searchedInput,results:e.searchInput.results,reviews:e.searchInput.reviews}})(U),Q=a(57),J=a(219),Z=a(220),$=a(221),K=a(222),X=a(223),Y=a(224),ee=a(225),te=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){return o.a.createElement("div",{className:"main"},o.a.createElement(J.a,null,o.a.createElement(Z.a,{className:"card-image",top:!0,width:"100%",src:this.props.data.best_book.image_url._text,alt:"Card image cap"}),o.a.createElement($.a,null,o.a.createElement(K.a,{className:"card-book-title"},this.props.data.best_book.title?this.props.data.best_book.title._text:""),o.a.createElement(X.a,null,this.props.data.best_book.author?this.props.data.best_book.author.name._text:""),o.a.createElement(Y.a,null,"Rating ",this.props.data.average_rating?this.props.data.average_rating._text:""),o.a.createElement(V.a,{name:"rating",editing:!1,starCount:5,value:parseInt(this.props.data.average_rating._text)}),o.a.createElement(g.a,{to:{pathname:"/detail/".concat(this.props.data.id._text),data:this.props.data}},o.a.createElement(ee.a,{className:"btn-primary w-100"},"View Details")))))}}]),t}(n.Component),ae=a(108),ne=a.n(ae),oe=a(109),re=a.n(oe),se=function(e){function t(e){var a;return Object(m.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={books:[],activePage:1,hasMoreItems:!0,totalResults:0},a}return Object(b.a)(t,e),Object(p.a)(t,[{key:"loadItems",value:function(){var e=this,t=this.state,a=t.activePage,n=t.books,o=t.totalResults,r=[],s=0;o-1!==n.length?j.a.get("https://www.goodreads.com/search/index.xml?key=".concat(I,"&q=").concat(this.props.match.params.q,"&page=").concat(a)).then(function(t){var o=R.a.xml2js(t.data,{compact:!0});r=o.GoodreadsResponse.search.results.work,s=o.GoodreadsResponse.search["total-results"]._text,e.setState({books:r?[].concat(Object(Q.a)(n),Object(Q.a)(r)):e.state.books,totalResults:s,activePage:a+1},function(){e.setState({hasMoreItems:s>n.length})})}):this.setState({hasMoreItems:!1})}},{key:"render",value:function(){var e=this,t=this.state.books,a=o.a.createElement("div",{className:"loader"},o.a.createElement(re.a,{className:"",type:"Oval",color:"#1a8e85",height:"100",width:"150"}));return o.a.createElement("div",{className:"container",ref:function(t){return e.scrollParentRef=t}},o.a.createElement(A,{routeName:this.props.location.pathname}),o.a.createElement("div",{className:"col"},o.a.createElement("h5",null,"Showing results for: ",this.props.match.params.q)),o.a.createElement("div",{className:"container"},o.a.createElement("div",{className:"row justify-content-center"},o.a.createElement("div",{className:"col-xs-12 col-sm-6 col-md-4 col-lg-3 my-3"},o.a.createElement(ne.a,{pageStart:0,loadMore:this.loadItems.bind(this),hasMore:this.state.hasMoreItems,loader:a,getScrollParent:function(){return e.scrollParentRef}},t.map(function(e,t){return o.a.createElement("div",{className:"tracks my-3",key:t},o.a.createElement(te,{data:e}))}))))))}}]),t}(n.Component);var ce=Object(E.b)(function(e){return{searchInput:e.searchInput.searchedInput,results:e.searchInput.inifiniteScrollResults}})(se),le=function(){return o.a.createElement(c.c,null,o.a.createElement(c.a,{exact:!0,path:"/",component:B}),o.a.createElement(c.a,{exact:!0,path:"/detail/:bookId",component:z}),o.a.createElement(c.a,{exact:!0,path:"/full-results/:q",component:ce}))};var ie=function(){return o.a.createElement("div",{className:"App"},o.a.createElement(le,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=a(31);var me=Object(ue.c)({searchedInput:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return console.log("SET_SEARCH_INPUT Action"),t.payload;default:return e}},results:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case w:return t.payload;default:return e}},reviews:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case x:return t.payload;default:return e}},inifiniteScrollResults:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case y:return[].concat(Object(Q.a)(e),Object(Q.a)(t.payload.searchResult));default:return e}}}),pe=Object(ue.c)({searchInput:me}),he=a(110),de=a(111),ve=a.n(de);var be=a(22),Ee=Object(ue.d)(pe,Object(ue.a)(ve.a,he.a)),ge=Object(be.a)({basename:"/"});s.a.render(o.a.createElement(E.a,{store:Ee},o.a.createElement(c.b,{history:ge},o.a.createElement(ie,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[115,1,2]]]);
//# sourceMappingURL=main.8114aece.chunk.js.map